import React from 'react';
import Enzyme, { shallow, mount } from 'enzyme';
import Notification from './Notification';

// TODO: Put this configuration in just one place
import Adapter from 'enzyme-adapter-react-16';
Enzyme.configure({ adapter: new Adapter() });

jest.useFakeTimers();

describe('Notification React component', () => {
it('Success Notification render correctly', () => {
  const component = shallow(
    <Notification level="success" message="Content" />
  );

  expect(component).toMatchSnapshot();
});

it('Error Notification render correctly', () => {
  const component = shallow(
    <Notification level="error" message="Content" />
  );

  expect(component).toMatchSnapshot();
});

it('Should hide on time specified as prop', () => {
  const component = mount(
    <Notification level="success" delay={3} message="Content" />
  );

  expect(component.html()).not.toBe(null);
  expect(component.state().visible).toBe(true);

  setTimeout(() => {
    expect(component.html()).toBe(null);
    expect(component.state().visible).toBe(false);
  }, 3000);

  jest.runAllTimers();
});
});
